.\" Generated by Mmark Markdown Processer - mmark.miek.nl
.TH "MMARK-SYNTAX" 7 "April 2019" "User Commands" "Mmark Markdown syntax"

.PP
This is version 2 of Mmark
\[la]https://github.com/mmarkdown/mmark\[ra]: based on a new markdown
implementation
\[la]https://github.com/gomarkdown/markdown\[ra] and some (small) language changes as well. We
think these language changes lead to a more consistent user experience and lead to less confusion.

.PP
See changes from v1
\[la]#changes-from-version-1\[ra] if you're coming from version 1.

.PP
Biggest changes:

.IP \(bu 4
Including files is now done relative to the file being parsed (i.e. the \fIsane\fP way).
.IP \(bu 4
Block attributes apply to block elements \fIonly\fP.
.IP \(bu 4
Callouts

.RS
.IP \(en 4
\fIalways\fP rendered and require double greater/less\-than signs, \fB\fC<<1>>\fR.
.IP \(en 4
\fIalways\fP require a comment in the code, i.e. \fB\fC//<<1>>\fR will be rendered as a callout, a plain
\fB\fC<<1>>\fR will not.

.RE
.IP \(bu 4
Block Tables have been dropped.
.IP \(bu 4
Example lists (originally copied from Pandoc) have been dropped.
.IP \(bu 4
Plain citations, i.e. \fB\fC@RFC5412\fR, when the reference was previously seen don't work anymore,
always use the full syntax \fB\fC[@RFC5412]\fR.


.SH "WHY THIS NEW VERSION?"
.PP
It fixes a bunch of long standing bugs and the parser generates an abstract syntax tree (AST).
It will be easier to add new renderers with this setup. It is also closer to Common Mark. So we
took this opportunity to support RFC 7991 XML (xml2rfc version 3), HTML5 and manual page output.
Also with code upstreamed (to gomarkdown
\[la]https://github.com/gomarkdown\[ra]), we have less code to
maintain.

.PP
Because of the abstract syntax tree it will also be easier to write helper tools, like, for instance
a tool that checks if all referenced labels in the document are actually defined. Another idea could
be to write a "check\-the\-code" tool that syntax checks all code in code blocks. Eventually these
could be build into the \fB\fCmmark\fR binary itself. See some fun
ideas
\[la]https://github.com/mmarkdown/filter\[ra] here.

.SH "MMARK V2 SYNTAX"
.PP
This document describes all the \fIextra\fP syntax elements that can be used in Mmark. Mmark's syntax is
based on the "standard" Markdown syntax
\[la]https://daringfireball.net/projects/markdown/syntax\[ra].
A good primer on what blackfriday implements is this
article
\[la]https://notes.peter-baumgartner.net/archive/content-organisation/blackfriday-markdown/\[ra].

.PP
.RS

.PP
Read the above documents if you haven't already, it helps you understand how markdown looks and feels.

.RE

.PP
For the rest we build up on https://github.com/gomarkdown/markdown
\[la]https://github.com/gomarkdown/markdown\[ra] and support all syntax
it supports
\[la]https://github.com/gomarkdown/markdown/blob/master/README.md\[ra]. We enable the following
extensions
\[la]https://github.com/gomarkdown/markdown/blob/master/README.md#extensions\[ra] by default:

.IP \(bu 4
\fIStrikethrough\fP, allow strike through text using \fB\fC~~test~~\fR.
.IP \(bu 4
\fIAutolink\fP, detect embedded URLs that are not explicitly marked.
.IP \(bu 4
\fIFootnotes\fP Pandoc style footnotes.
.IP \(bu 4
\fIHeadingIDs\fP, specify heading IDs  with \fB\fC{#id}\fR.
.IP \(bu 4
\fIAutoHeadingIDs\fP, create the heading ID from the text.
.IP \(bu 4
\fIDefinitionLists\fP, parse definition lists.
.IP \(bu 4
\fIMathJax\fP, parse MathJax
.IP \(bu 4
\fIOrderedListStart\fP, notice start element of ordered list.
.IP \(bu 4
\fIAttributes\fP, allow block level attributes.
.IP \(bu 4
\fISmartypants\fP, expand \fB\fC--\fR and \fB\fC---\fR into ndash and mdashes.
.IP \(bu 4
\fISuperSubscript\fP, parse super\- and subscript: H\d2\uO is water and 2\u10\d is 1024.
.IP \(bu 4
\fITables\fP, parse tables.
.IP \(bu 4
\fINonBlockingSpace\fP, convert "backslash space" into a non blocking space.


.PP
Mmark adds numerous enhancements to make it suitable for writing (IETF
\[la]https://ietf.org\[ra]) Internet
Drafts and even complete books. It <strike>steals</strike> borrows syntax elements from pandoc
\[la]http://johnmacfarlane.net/pandoc/\[ra],
kramdown
\[la]https://kramdown.gettalong.org/\[ra], leanpub
\[la]https://leanpub.com/help/manual\[ra], asciidoc
\[la]http://www.methods.co.nz/asciidoc/\[ra], PHP markdown extra
\[la]http://michelf.com/projects/php-markdown/extra/\[ra] and Scholarly markdown
\[la]http://scholarlymarkdown.com/Scholarly-Markdown-Guide.html\[ra].

.SH "WHAT DOES MMARK ADD?"
.PP
Mmark adds:

.IP \(bu 4
(Extended) title block
\[la]#title-block\[ra] to specify authors and IETF specific bits in
TOML
\[la]https://en.wikipedia.org/wiki/TOML\[ra] format.
.IP \(bu 4
Special sections
\[la]#special-sections\[ra], for abstracts, prefaces or notes.
.IP \(bu 4
Including other files
\[la]#including-files\[ra] with the option to specify line ranges, regular
expressions and/or prefixing each line with a custom string.
.IP \(bu 4
Document divisions
\[la]#document-divisions\[ra].
.IP \(bu 4
Captions
\[la]#captions\[ra] for code, tables, quotes and subfigures.
.IP \(bu 4
Asides
\[la]#asides\[ra].
.IP \(bu 4
Figures and Subfigures
\[la]#figures-and-subfigures\[ra] \- allows grouping images into subfigures as
well as giving a single image metadata (a link, attributes, etc.). See Images in
Mmark
\[la]/syntax/images\[ra] for more details.
.IP \(bu 4
Block Level Attributes
\[la]#block-level-attributes\[ra] that allow to specify attributes, classes and
IDs for elements.
.IP \(bu 4
Indices
\[la]#indices\[ra] to mark an item (and/or a subitem) to be referenced in the document index.
.IP \(bu 4
Citations
\[la]#citations\[ra] and adding XML References
\[la]#xml-references\[ra].
.IP \(bu 4
In document cross references
\[la]#cross-references\[ra], short form of referencing a section in the
document.
.IP \(bu 4
Super\- and Subscript
\[la]#super-and-subscript\[ra]
.IP \(bu 4
Callouts
\[la]#callouts\[ra] in code and text.
.IP \(bu 4
BCP14
\[la]#bcp14\[ra] (RFC 2119) keyword detection.


.SS "SYNTAX GOTCHAS"
.PP
Because markdown is not perfect, there are some gotchas you have to be aware of:

.IP \(bu 4
Adding a caption under a quote block (\fB\fCQuote:\fR) needs a newline before it, otherwise the caption text
will be detected as being part of the quote.
.IP \(bu 4
Including files (and code includes) requires an empty line before them, as they are block level
elements and we need to trigger \fIthat\fP scan from the parser.
.IP \(bu 4
Including files in lists requires a empty line to be present in the list item; otherwise Mmark
will only assume inline elements and not parse the includes (which are block level elements).
.IP \(bu 4
A bibliography is \fIonly added\fP if a \fB\fC{backmatter}\fR has been specified, because we need to add just
before that point.
.IP \(bu 4
Intra\-work emphasis is enabled so a string like \fB\fCSSH_MSG_KEXECDH_REPLY\fR is interpreted as
\fB\fCSSH<em>MSG</em>...\fR. You need to escape the underscores: \fB\fCSSH\_MSG...\fR.


.SS "RFC 7991 XML OUTPUT"
.PP
This is the output format used for generating Internet\-Drafts and RFCs. The generated XML needs to
be processed by another tool (xml2rfc) to generate to official (final) output. The XML from \fImmark\fP
can be used directly to upload to the IETF tools website.

.TP
Title Block:
If the document has a title block
\[la]#title-block\[ra] the front matter is already open. Closing the
front matter can only be done by starting the middle matter with \fB\fC{mainmatter}\fR. Any open
"matters" are closed when the document ends. \fIArea\fP defaults to "Internet" and \fIIpr\fP defaults to
\fB\fCtrust200902\fR.


Not giving a date will output \fB\fC<date/>\fR which mean the current date will be applied \fIwhen
xml2rfc is run\fP.
.TP
Abstract:
The abstract can be started by using the special header syntax \fB\fC.# Abstract\fR
.TP
Note:
Any special header that is not "abstract" or "preface" will be a
note
\[la]https://tools.ietf.org/html/rfc7749#section-2.24\[ra]: a numberless section.
These notes are only allowed in the \fB\fC<front>\fR section of the document.
Note [sic] that notes can only contain \fB\fC<t>\fR and not other block level elements,
Mmark will filter these out for: \fB\fCblockquote\fR currently (2020 September).
.TP
BCP 14/RFC 2119 Keywords:
If an RFC 2119 word is found enclosed in \fB\fC**\fR it will be rendered
as an \fB\fC<bcp14>\fR element: i.e. \fB\fC**MUST**\fR becomes \fB\fC<bcp14>MUST</bcp14>\fR.
.TP
Artwork:
Artwork is added by using a (fenced) code block. If the code block has an caption it will be
wrapped in a \fB\fC<figure>\fR, this is true for source code as well.
.TP
Source code:
If you want to typeset a source code instead of an artwork you must specify a language to the
fenced block:

.PP
.RS

.nf
``` go
println(hello)
````

.fi
.RE


Will be typesets as source code with the language set to \fB\fCgo\fR.
.TP
Block Level Attributes:
We use the attributes as specified in RFC 7991, e.g. to specify an empty list style use:
\fB\fC{empty="true"}\fR before the list. The renderer for this output format filters unknown attributes
away.
.TP
Footnotes:
Are discarded from the final output, don't use them.
.TP
Images:
Images are supported. We convert this to an \fB\fC<artwork>\fR with \fB\fCsrc\fR set to the image URL of path.
I.e. \fB\fC![alt text](img.svg "title")\fR becomes \fB\fC<artwork src="img.svg" type="svg" name="title"/>\fR.
Note the first \fB\fCsvg\fR (the alt text) is used as the \fB\fCtype=\fR attribute. Also note that an image
like this will be wrapped in \fB\fC<t>\fR which is not allowed in RFC 7991 syntax. So to make this
fully work you need to the image in a subfigure: \fB\fC!---\fR. See Images in Mmark
\[la]/syntax/images\[ra]
for more details.
.TP
Comments:
HTML Comments are detected and discarded. These can be useful to make the parser parse certain
constructs as a block element without meddling with the output.
.TP
HTML:
The \fB\fC<br>\fR tag is detected and converted into a hard break.
.TP
Unicode:
Just type the Unicode characters, the renderer takes care of putting these in between \fB\fC<u>\fR tags.


.SS "HTML5 OUTPUT"
.TP
Title Block:
From the title block only the title is used, in the \fB\fC<title>\fR tag.


.SS "MANUAL PAGE OUTPUT"
.TP
Title Block:
The title block needs a few elements to correctly generate a manual page

.RS
.IP \(bu 4
\fB\fCtitle\fR, title needs to \fIend in a digit\fP to signal the \fIsection\fP, defaults to "1" if nothing is
found.
.IP \(bu 4
\fB\fCarea\fR, what is it, e.g. "User Commands".
.IP \(bu 4
\fB\fCworkgroup\fR, who wrote this e.g.  "Mmark Markdown".
.IP \(bu 4
\fB\fCdate\fR, date of the man page, optional, defaults to "today".
.IP \(bu 4
\fB\fCauthor\fR, to add an Authors section at the end.

.RE
.TP
Images:
See Images in Mmark
\[la]/syntax/images\[ra] for details, \fB\fCascii-art\fR images from a sub\-figure are
included.
.TP
References and citations:
Supported, a "Bibliography" section is added. Note that unlike XML2RFC, references for IDs and
RFCs \fIare not\fP automatically added.
.TP
Code Block:
Tabs are converted into four spaces.


.SH "BLOCK ELEMENTS"
.SS "TITLE BLOCK"
.PP
A Title Block contains a document's meta data; title, authors, date and other elements. The elements
that can be specified are copied from the xml2rfc v3
standard
\[la]https://tools.ietf.org/html/rfc7991\[ra]. More on these below. The complete title block is
specified in TOML
\[la]https://github.com/toml-lang/toml\[ra]. Examples title blocks can be found in the
repository of Mmark
\[la]https://github.com/mmarkdown/mmark/tree/master/rfc\[ra].

.PP
The title block itself needs three or more \fB\fC%\fR's at the start and end of the block. A minimal title
block would look like this:

.PP
.RS

.nf
%%%
title = "Foo Bar"
%%%

.fi
.RE

.SS "ELEMENTS OF THE TITLE BLOCK"
.PP
An I\-D needs to have a Title Block with the following items filled out:

.IP \(bu 4
\fB\fCtitle\fR \- the main title of the document.
.IP \(bu 4
\fB\fCabbrev\fR \- abbreviation of the title.
.IP \(bu 4
\fB\fCupdates/obsoletes\fR \- array of integers.
.IP \(bu 4
\fB\fCseriesInfo\fR, containing:

.RS
.IP \(en 4
\fB\fCname\fR \- \fB\fCRFC\fR, \fB\fCInternet-Draft\fR, \fB\fCDOI\fR, or \fB\fCFYI\fR.
.IP \(en 4
\fB\fCvalue\fR \- draft name or RFC number
.IP \(en 4
\fB\fCstream\fR \- \fB\fCIETF\fR (default), \fB\fCIAB\fR, \fB\fCIRTF\fR or \fB\fCindependent\fR.
.IP \(en 4
\fB\fCstatus\fR \- \fB\fCstandard\fR, \fB\fCinformational\fR, \fB\fCexperimental\fR, \fB\fCbcp\fR, \fB\fChistoric\fR, or \fB\fCfull-standard\fR.

.RE
.IP \(bu 4
\fB\fCipr\fR \- usually just set \fB\fCtrust200902\fR.
.IP \(bu 4
\fB\fCarea\fR \- usually just \fB\fCInternet\fR.
.IP \(bu 4
\fB\fCworkgroup\fR \- the workgroup the document is created for.
.IP \(bu 4
\fB\fCkeyword\fR \- array with keywords (optional).
.IP \(bu 4
\fB\fCauthor(s)\fR \- define all the authors.
.IP \(bu 4
\fB\fCcontact(s)\fR \- define all the contacts.
.IP \(bu 4
\fB\fCdate\fR \- the date for this I\-D/RFC.
.IP \(bu 4
\fB\fClanguage\fR \- the language for this document, this uses localized names for \fB\fCIndex\fR, \fB\fCFootnotes\fR
and \fB\fCReferences\fR, etc. Valid values are from BCP47
\[la]https://tools.ietf.org/html/bcp47\[ra]. This
defaults to \fB\fCen\fR (English). See the current
list
\[la]https://github.com/mmarkdown/mmark/blob/master/lang/lang.go\[ra].
.IP \(bu 4
\fB\fCindexInclude\fR \- set to true when you want to include an index (defaults to true).


.PP
For a manual page the \fB\fCtitle\fR, \fB\fCarea\fR and \fB\fCworkgroup\fR are mandatory, if \fB\fCdate\fR is not specified,
"today" is assumed.

.PP
An example would be:

.PP
.RS

.nf
%%%
title = "Using Mmark to create I\-Ds and RFCs"
abbrev = "mmark2rfc"
updates = [1925, 7511]
ipr= "trust200902"
area = "Internet"
workgroup = ""
keyword = ["markdown", "xml", "mmark"]

[seriesInfo]
status = "informational"
name = "Internet\-Draft"
value = "draft\-gieben\-mmark2rfc\-00"
stream = "IETF"

date = 2014\-12\-10T00:00:00Z

[[author]]
initials="R."
surname="Gieben"
fullname="R. (Miek) Gieben"
organization = "Mmark"
  [author.address]
  email = "miek@miek.nl"
  emails = ["another@example.org"] # for when you need to speficy more than 1 email address
%%%

.fi
.RE

.PP
An \fB\fC#\fR acts as a comment in this block. TOML itself is specified here
\[la]https://github.com/toml-lang/toml\[ra].

.PP
If you want to define a \fB\fCcontact\fR do the following:

.PP
.RS

.nf
[[contact]]
initials="R.."
surname="Gieben"
fullname="R. (Miek) Gieben"
  [contact.address]
  email = "miek@miek.nl

.fi
.RE

.PP
You can then \fIreference\fP this contact using a \fIcitation\fP via the \fB\fCfullname\fR: \fB\fC[@R. (Miek) Gieben]\fR.
This also works when referencing an author of the I\-D. Note just like authors, defining contacts
needs to happen in the titleblock.

.PP
To renders contacts just like the authors are rendered, they need to be a put directly after opening
a new section in the \fIfirst\fP paragraph:

.PP
.RS

.nf
# Acknowledgements

[@R. (Miek) Gieben] [@More Folk]

Miek wrote ..., While More wrote ..

.fi
.RE

.SS "SPECIAL SECTIONS"
.PP
Any section that needs special handling, like an abstract or preface can be started with \fB\fC.#
Heading\fR. This creates a special section that is usually unnumbered.

.SS "INCLUDING FILES"
.PP
Including other files can done be with \fB\fC{{filename}}\fR, if the path of \fB\fCfilename\fR is \fInot\fP absolute,
the filename is taken relative to \fIcurrent file being processed\fP. With \fB\fC<{{filename}}\fR
you include a file as a code block. The main difference being it will be returned as a code
block. The file's extension \fIwill be used\fP as the language. The syntax is:

.PP
.RS

.nf
{{pathname}}[address]

.fi
.RE

.PP
And address can be \fB\fCN,M\fR, where \fB\fCN\fR and \fB\fCM\fR are line numbers. If \fB\fCM\fR is not specified, i.e. \fB\fCN,\fR it
is taken that we should include the entire file starting from \fB\fCN\fR.

.PP
Or you can use regular expression with: \fB\fC/N/,/M/\fR, where \fB\fCN\fR and \fB\fCM\fR are regular expressions that
specify from where to where to include lines from file.

.PP
Each of these can have an optional \fB\fCprefix=""\fR specifier.

.PP
.RS

.nf
{{filename}}[3,5]

.fi
.RE

.PP
Only includes the lines 3 to (\fInot\fP inclusive) 5 into the current document.

.PP
.RS

.nf
{{filename}}[3,5;prefix="C: "]

.fi
.RE

.PP
will include the same lines \fIand\fP prefix each include line with \fB\fCC:\fR.

.PP
Captioning works as well:

.PP
.RS

.nf
<{{test.go}}[/START/,/END/]
Figure: A sample function.

.fi
.RE

.PP
Note that because the extension of the file above is "go", this include will lead to the following
block being parsed:

.PP
.RS

.nf
~~~ go
// test.go data
~~~
Figure: A sample function.

.fi
.RE

.SS "DOCUMENT DIVISIONS"
.PP
Mmark support three document divisions, front matter, main matter and the back matter. Mmark
automatically starts the front matter for you \fIif\fP the document has a title block. Switching
divisions can be done with \fB\fC{frontmatter}\fR, \fB\fC{mainmatter}\fR and \fB\fC{backmatter}\fR. This must be the only
thing on the line.

.PP
Note if there isn't a \fB\fC{backmatter}\fR the bibliography will not be inserted.

.SS "CAPTIONS"
.PP
Mmark supports caption below tables
\[la]#tables\[ra], code blocks
\[la]#code-blocks\[ra] and block
quotes
\[la]#block-quotes\[ra]. You can caption each elements with \fB\fCTable:\fR, \fB\fCFigure:\fR and \fB\fCQuote:\fR
respectively. The caption extends to the first \fIempty\fP line. Some examples:

.PP
.RS

.nf
Name    | Age
\-\-\-\-\-\-\-\-|\-\-\-\-\-:
Bob     | 27
Alice   | 23
Table: This is the table caption.

.fi
.RE

.PP
Or for a code block:

.PP
.RS

.nf
 ~~~ go
 func getTrue() bool {
     return true
 }
 ~~~
 Figure: This is a caption for a code block.

.fi
.RE

.PP
And for a quote:

.PP
.RS

.nf
 > Ability is nothing without opportunity.

 Quote: https://example.com, Napoleon Bonaparte

.fi
.RE

.PP
A caption can potentially contain a "heading ID": \fB\fC{#id}\fR as the \fIlast\fP text in the caption. If this
is found that ID is used as the ID for the entire figure:

.PP
.RS

.nf
Name    | Age
\-\-\-\-\-\-\-\-|\-\-\-\-\-:
Bob     | 27
Alice   | 23
Table: This is the table caption. {#ages}

.fi
.RE

.PP
Colspan is also supported, just repeat the pipe symbol after the cell:

.PP
.RS

.nf
Name    | Age
\-\-\-\-\-\-\-\-|\-\-\-\-\-
Bob     ||
Alice   | 23

.fi
.RE

.SS "ASIDES"
.PP
Any text prefixed with \fB\fCA>\fR will become an
aside
\[la]https://developer.mozilla.org/en/docs/Web/HTML/Element/aside\[ra]. This is similar to a block
quote, but can be styled differently.

.SS "FIGURES AND SUBFIGURES"
.PP
To \fIgroup\fP artworks and code blocks into figures, we need an extra syntax element. Scholarly
markdown
\[la]http://scholarlymarkdown.com/Scholarly-Markdown-Guide.html\[ra] has a neat syntax for this. It uses a special section syntax and all images in that
section become subfigures of a larger figure. Disadvantage of this syntax is that it can not be used
in lists. We use a fenced code block like syntax: \fB\fC!---\fR as the opening and closing "tag".
Note: only inline elements are parsed inside a figure block.

.PP
Basic usage:

.PP
.RS

.nf
!\-\-\-
![Alt text](/path/to/img.jpg "Optional title")
!\-\-\-

.fi
.RE

.PP
if the figure block has a caption that will be used as well:

.PP
.RS

.nf
!\-\-\-
![Alt text](/path/to/img.jpg "Optional title")
![Alt2 text](/path/to/img2.jpg "Optional title2")
!\-\-\-
Figure: this is a figure containing subfigures.

.fi
.RE

.PP
Or when just using fenced code blocks:

.PP
.RS

.nf
!\-\-\-
~~~ ascii\-art
+\-\-\-\-\-+
| ART |
+\-\-\-\-\-+
~~~
Figure: Caption for this ascii\-art

~~~ c
printf("%s\\n", "hello");
~~~
!\-\-\-
Figure: Caption for both figures.

.fi
.RE

.SS "BLOCK LEVEL ATTRIBUTES"
.PP
A "Block Level Attribute" is a list of HTML attributes between braces: \fB\fC{...}\fR. It allows you to
set classes, an anchor and other types of \fIextra\fP information for the next block level element.

.PP
The full syntax is: \fB\fC{#id .class key="value"}\fR. Values may be omitted, i.e., just \fB\fC{.class}\fR is
valid.

.PP
The following example applies the attributes: \fB\fCtitle\fR and \fB\fCanchor\fR to the blockquote:

.PP
.RS

.nf
{title="The blockquote" #myid}
> A blockquote with a title

.fi
.RE

.PP
Gets expanded into:

.PP
.RS

.nf
<blockquote anchor="myid" title="The blockquote">
    <t>A blockquote with a title</t>
</blockquote>

.fi
.RE

.SS "PARAGRAPHS"
.PP
Text that is separated from the rest of the content with empty lines.

.SS "TABLES"
.PP
Tables can be entered by using a simple syntax:

.PP
.RS

.nf
Name    | Age
\-\-\-\-\-\-\-\-|\-\-\-\-\-\-
Bob     | 27
Alice   | 23

.fi
.RE

.PP
Table footers are supported as well and can be added with equal signs (=):

.PP
.RS

.nf
Name    | Age
\-\-\-\-\-\-\-\-|\-\-\-\-\-\-
Bob     | 27
Alice   | 23
========|======
Total   | 50

.fi
.RE

.PP
The pipe symbol (\fB\fC|\fR) to mark columns does not need to be aligned. Each row must be on a single
line.

.PP
Headerless tables are also supported, just leave of the first line.

.SS "LISTS"
.PP
Lists are the normal markdown lists, but we track how they are typeset, for ordered list the
delimiter can be either \fB\fC.\fR or \fB\fC)\fR. When a parenthesis is used the \fB\fCtype\fR is set to \fB\fC%d)\fR. Note that
any block level attributes take precedence.

.PP
Newlines between list items will create a non\-compact list, i.e. compare:

.PP
.RS

.nf
1. Item
2. Item

.fi
.RE

.PP
with:

.PP
.RS

.nf
1. Item

2. Item

.fi
.RE

.PP
This is true for all types of lists.

.SH "INLINE ELEMENTS"
.SS "INDICES"
.PP
Defining indices allows you to create an index. The define an index use the \fB\fC(!item)\fR. Sub items can
be added as well, with \fB\fC(!item, subitem)\fR. To make \fB\fCitem\fR primary, use another \fB\fC!\fR: \fB\fC(!!item,
subitem)\fR. If any index is defined the end of the document contains the list of indices. The
\fB\fC-index=false\fR flag suppresses this generation.

.PP
An index may apply to an \fIentire\fP section. This can be entered (just like contacts) by having an
index (or multiple),  and just the index, to be the first paragraph after a new section.

.SS "CITATIONS"
.PP
Mmark uses the citation syntax from Pandoc: \fB\fC[@RFC2535]\fR, the citation can either be informative
(default) or normative, this can be indicated by using the \fB\fC?\fR or \fB\fC!\fR modifier: \fB\fC[@!RFC2535]\fR create
a normative reference for RFC 2535. To suppress a citation use \fB\fC[@-RFC1000]\fR. It will still add the
citation to the references, but does not show up in the document as a citation.

.PP
The first seen modifier determines the type (suppressed, normative or informative). Multiple
citation can separated with a semicolon: \fB\fC[@RFC1034;@RFC1035]\fR.

.PP
If you reference an RFC, I\-D or W3C document the reference will be added automatically (no need to
muck about with an \fB\fC<reference>\fR block). This is to say:

.PP
Any reference starting with \fIRFC\fP, \fII\-D.\fP or \fIW3C.\fP will be automatically added to the correct
reference section.

.PP
For I\-Ds you may want to add a draft sequence number, which can be done as such: \fB\fC[@?I-D.blah#06]\fR.
If you reference an I\-D \fIwithout\fP a sequence number it will create a reference to the \fIlast\fP I\-D in
citation index. I.e. a draft named "draft\-gieben\-pandoc2rfc", the I\-D reference becomes:
\fB\fCI-D.gieben-pandoc2rfc\fR. Referencing multiple versions of the same I\-D in a document will lead to
validation errors when running xml2rfc.

.PP
A bibliography section is created by default if a \fB\fC{backmatter}\fR is given, but you can suppress it
by using the command line flag \fB\fC-bibliography=false\fR. No \fB\fC{backmatter}\fR, no bibliography.

.PP
A non\-suppressed reference to the \fIfull name\fP of an author or contact will insert the referenced
person as a \fB\fCcontact\fR. See https://www.rfc\-editor.org/materials/FAQ\-xml2rfcv3.html#section\-5.4
\[la]https://www.rfc-editor.org/materials/FAQ-xml2rfcv3.html#section-5.4\[ra].

.SS "REFERENCE TEXT SUFFICES"
.PP
You can specify extra text after the citation using a comma: \fB\fC[@RFC2535, section 5]\fR, see
https://www.rfc\-editor.org/materials/FAQ\-xml2rfcv3.html#name\-how\-do\-i\-link\-to\-multiple\-se
\[la]https://www.rfc-editor.org/materials/FAQ-xml2rfcv3.html#name-how-do-i-link-to-multiple-se\[ra].
This is used in the following manner:

.IP \(bu 4
\fB\fC[@RFC2535, section 5]\fR \-> sectionFormat="of"
.IP \(bu 4
\fB\fC[@RFC2525, see, section 5]\fR \-> sectionFormat="comma"
.IP \(bu 4
\fB\fC[@RFC2525, (see) section 5]\fR \-> sectionFormat="parens"
.IP \(bu 4
\fB\fC[@RFC2525, 5]\fR \-> sectionFormat="bare"


.PP
\fB\fCpage\fR, \fB\fCparagraph\fR, etc., might be supported in the future if these pop up in XML2RFC. Translation
of these strings \fIis\fP supported for a few languages, \fB\fCzie, sectie 5\fR (Dutch) is supported for
instance.

.PP
Also note these strings need to be literary typed as shown here (we may become more lenient in the
future).

.SS "XML REFERENCES"
.PP
Any valid XML reference fragment found anywhere in the document, can be used as a citation reference.
The syntax of the XML reference element is defined in RFC
7749
\[la]https://tools.ietf.org/html/rfc7749#section-2.30\[ra]. The \fB\fCanchor\fR defined can be used in the
citation
\[la]#Citations\[ra], which the example below that would be \fB\fC[@pandoc]\fR:

.PP
.RS

.nf
<reference anchor='pandoc' target='http://johnmacfarlane.net/pandoc/'>
    <front>
        <title>Pandoc, a universal document converter</title>
        <author initials='J.' surname='MacFarlane' fullname='John MacFarlane'>
            <organization>University of California, Berkeley</organization>
            <address>
                <email>jgm@berkeley.edu</email>
                <uri>http://johnmacfarlane.net/</uri>
            </address>
        </author>
        <date year='2006'/>
    </front>
</reference>

.fi
.RE

.PP
Note that for citing I\-Ds and RFCs you \fIdon't\fP need to include any XML, as Mmark will pull these
automatically from their online location: or technically more correct: the xml2rfc post processor
will do this.

.PP
The newer \fB\fCreferencegroup\fR is also supported. No attempt to parse it is made, it's detected and
included in the bibliography.

.SS "CROSS REFERENCES"
.PP
Cross references can use the syntax \fB\fC[](#id)\fR, but usually the need for the title within the
brackets is not needed, so Mmark has the shorter syntax \fB\fC(#id)\fR to cross reference in the document.

.PP
Example:

.PP
.RS

.nf
My header {#header}

Lorem ipsum dolor sit amet, at ultricies ...
See Section (#header).

.fi
.RE

.PP
Using Block Level Attributes this also works for tables and figures (including artwork):

.PP
.RS

.nf
{id="myid"}
\-\-\-|\-\-\-
 a | b
 d | d

.fi
.RE

.PP
or

.PP
.RS

.nf
{id="myid"}
~~~~
artwork
~~~~

.fi
.RE

.PP
And then reference the same \fB\fC(#myid)\fR, the formatter (\fB\fCxml2rfc\fR) will do the right thing.

.SS "CROSS REFERENCE TEXT SUFFIXES"
.PP
Just like 
\[la]#reference-text-suffices\[ra], you can add a suffix text to a reference, to influence how
xml2rfc will render it, see https://www.rfc\-editor.org/materials/FAQ\-xml2rfcv3.html#section\-3.11
\[la]https://www.rfc-editor.org/materials/FAQ-xml2rfcv3.html#section-3.11\[ra]
it will allow you to set the format attribute. The following is supported:

.IP \(bu 4
counter
.IP \(bu 4
title
.IP \(bu 4
default
.IP \(bu 4
\fB\fC(#myid, use counter)\fR \-> format="counter"
.IP \(bu 4
\fB\fC(#myid, use title)\fR \-> format="title"


.PP
Translation of these strings \fIis\fP supported for a few languages, \fB\fC(#myid, gebruik titel)\fR (Dutch) is
supported for instance.

.PP
Also note these strings need to be literary typed as shown here (we may become more lenient in the
future).

.SS "SUPER\- AND SUBSCRIPT"
.PP
For superscript use \fB\fC^\fR and for subscripts use \fB\fC~\fR. For example:

.PP
.RS

.nf
H~2~O is a liquid. 2^10^ is 1024.

.fi
.RE

.PP
Inside a super\- or subscript you must escape spaces. Thus, if you want the letter P with 'a cat' in
subscripts, use \fB\fCP~a\ cat~\fR, not \fB\fCP~a cat~\fR.

.SS "CALLOUTS"
.PP
Callouts are way to reference code from paragraphs following that code. Mmark uses the following
syntax for specifying a callout \fB\fC<<N>>\fR where N is integer > 0.

.PP
In code blocks you can use the \fIsame\fP syntax to create a callout:

.PP
.RS

.nf
    Code  <1>
    More  <2>

As you can see in <<1>> but not in <<2>>. There is no <<3>>.

.fi
.RE

.PP
Using callouts in source code examples will lead to code examples that do not compile.
To fix this the callout needs to be placed in a comment, but then your source show useless empty comments.
To fix this Mmark will detect (and remove!) the comment from the callout, leaving your
example pristine in the document.

.PP
Note that callouts \fIin code blocks\fP are only detected if the renderer has been configured to look
for them. The default mmark configuration is to detect them after \fB\fC//\fR and \fB\fC#\fR comment starters.

.PP
Lone callouts (in code blocks) without them being prefixed with a comment means they are not
detected by Mmark.

.SS "BCP14"
.PP
Phrases that are defined in RFC 2119 (i.e. MUST, SHOULD, etc) are detected when being type set as
strong elements: \fB\fC**MUST**\fR, in the RFC 7991 output these will typeset as \fB\fC<bcp14>MUST</bcp14>\fR.

.SH "CHANGES FROM VERSION 1"
.PP
These are the changes from Mmark version 1:

.IP \(bu 4
Citations:

.RS
.IP \(en 4
Suppressing a citation is done with \fB\fC[@-ref]\fR (it was the reverse \fB\fC-@\fR in v1), this is more consistent.
.IP \(en 4
Multiple citations are allowed in one go, separated with a semicolons: \fB\fC[@ref1; @ref2]\fR.
.IP \(en 4
A reference text suffix is allowed \fB\fC[@ref, section 23]\fR, the separation character is a comma; this
mirrors the pandoc syntax.

.RE
.IP \(bu 4
Indices: now just done with \fB\fC(!item)\fR, marking one primary will be: \fB\fC(!!item)\fR.
.IP \(bu 4
Code block callouts are now a renderer setting, not a Block Level
Attribute
\[la]#block-level-attributes\[ra]. Callout in code are \fIonly\fP detected if they are used after
a comment.
.IP \(bu 4
Including files with a prefix is now specified in the address specification:
\fB\fC{{myfile}}[prefix="C: "]\fR will use \fB\fCC:\fR as the prefix. No more mucking about with block
attribute lists that are hard to discover.
.IP \(bu 4
There no extended table syntax; if this ever comes back it needs to more robust implementation.
.IP \(bu 4
Title Block need to be sandwiched between \fB\fC%%%\fR, the prefix \fB\fC%\fR does not work anymore.


.PP
Syntax that is \fInot\fP supported anymore:

.IP \(bu 4
HTML abbreviations.
.IP \(bu 4
The different list syntaxes have been dropped, use a Block Level
Attribute
\[la]#block-level-attributes\[ra] to tweak the output.
.IP \(bu 4
Tasks lists and example lists.
.IP \(bu 4
Comment detection, i.e. to support \fB\fCcref\fR: dropped. Comments are copied depending on the output
renderer.
.IP \(bu 4
Parts
.IP \(bu 4
Extended table syntax.


